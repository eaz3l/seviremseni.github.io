<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="A personalized love story adventure.">
    <meta name="theme-color" content="#8B0000">
    <title>Our Love Story</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lato:wght@300;400;700&family=Great+Vibes&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <div id="loading-screen" aria-hidden="false">
        <div class="heart-loader"></div>
        <p id="loading-text">Weaving magic...</p>
    </div>

    <!-- Setup Modal -->
    <div id="setup-modal" class="modal active" role="dialog" aria-modal="true" aria-labelledby="setup-title">
        <div class="modal-content">
            <h2 id="setup-title">Begin Your Story</h2>
            <form id="setup-form">
                <div class="input-group">
                    <label for="partner1">Your Name</label>
                    <input type="text" id="partner1" required placeholder="Name">
                </div>
                <div class="input-group">
                    <label for="partner2">Partner's Name</label>
                    <input type="text" id="partner2" required placeholder="Name">
                </div>
                <div class="input-group">
                    <label for="startDate">Love Began On</label>
                    <input type="date" id="startDate" required>
                </div>
                <button type="submit" class="btn-primary">Create Magic ‚ú®</button>
            </form>
        </div>
    </div>

    <!-- Main Content -->
    <main id="app" class="hidden">
        <button id="theme-toggle" aria-label="Toggle Dark Mode">üåô</button>
        <button id="music-toggle" aria-label="Toggle Music">üéµ</button>

        <section id="hero" class="section">
            <canvas id="heart-canvas"></canvas>
            <div class="hero-content">
                <h1 class="glow-text">Happy Valentine's Day</h1>
                <h2 id="couple-names"></h2>
                <p id="time-together" class="subtitle"></p>
                <div class="scroll-indicator">
                    <span>‚ù§Ô∏è</span>
                </div>
            </div>
            <div class="aurora-bg"></div>
        </section>

        <section id="timeline" class="section">
            <h2>Our Journey</h2>
            <div class="timeline-container" id="timeline-list">
                <!-- Dynamically populated -->
            </div>
            <button id="add-memory-btn" class="btn-secondary">+ Add Memory</button>
        </section>

        <section id="quiz" class="section">
            <h2>Love Quiz</h2>
            <div id="quiz-container" class="card">
                <div id="quiz-question"></div>
                <div id="quiz-options"></div>
                <div id="quiz-result" class="hidden"></div>
            </div>
        </section>

        <section id="gift" class="section">
            <h2>A Gift For You</h2>
            <div class="gift-container">
                <div class="gift-box" id="gift-box">
                    <div class="gift-lid"></div>
                    <div class="gift-body"></div>
                    <div class="gift-bow"></div>
                    <div class="gift-content">
                        <p id="ai-poem" class="poem-text"></p>
                    </div>
                </div>
                <p class="instruction">Tap to open</p>
            </div>
        </section>

        <section id="bloom" class="section bloom-hidden">
            <canvas id="flower-canvas"></canvas>
            <div class="bloom-msg">
                <h3>Our Love Blooms</h3>
                <p>Use "Shake" gesture on mobile or click below!</p>
                <button id="bloom-btn" class="btn-primary">Bloom üå∏</button>
            </div>
        </section>
        
        <section id="share" class="section">
            <h2>Share Our Love</h2>
            <div id="ecard" class="ecard">
                <h3 id="ecard-title">Variable Love</h3>
                <p id="ecard-msg">Celebrating our connection.</p>
                <div id="ecard-footer">Forever & Always</div>
                <div id="qrcode"></div>
            </div>
            <button id="download-btn" class="btn-primary">Download Card üì∏</button>
        </section>

        <footer>
            <p>Made with ‚ù§Ô∏è by <span class="ai-artisan">AI Artisan</span></p>
            <p id="footer-confetti-trigger" style="cursor: pointer;">‚ú®</p>
        </footer>
    </main>

    <!-- Audio -->
    <audio id="bg-music" loop>
        <!-- Placeholder - a simple generated tone or silence for now, logic will handle synthesis/base64 -->
    </audio>

    <script src="script.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js');
            });
        }
    </script>
</body>
</html>
